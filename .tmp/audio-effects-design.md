# Audio Effects & Sampler Design

## 概要
現在のSound Programming（独立したシンセサイザー）を、シェーダーに直接影響を与えるサンプラー/エフェクター機能に置き換える。

## 機能設計

### 1. オーディオサンプラー
- **サンプルバンク**: プリセットの音源（キック、スネア、ハイハット、エフェクト音など）
- **トリガーパッド**: 1-9キーまたはクリックで各サンプルを再生
- **ループ機能**: サンプルのループ再生
- **ピッチ/スピード調整**: 各サンプルの再生速度を変更

### 2. リアルタイムエフェクター
- **フィルター**: ローパス、ハイパス、バンドパス
- **ディレイ**: エコー効果
- **リバーブ**: 空間的な広がり
- **ディストーション**: 音の歪み
- **コンプレッサー**: ダイナミクスコントロール

### 3. シェーダー連携
- エフェクト処理後の音声データをリアルタイムでシェーダーに送信
- 各エフェクトパラメータをシェーダーのuniform変数として利用可能
- ビジュアルフィードバック（エフェクトの強さが視覚的に反映）

## 実装計画

### Phase 1: 基本構造の変更
1. `SoundProgramming.svelte`を`AudioEffects.svelte`にリネーム
2. Tone.jsを使用したエフェクトチェーンの構築
3. AudioAnalyzerとの連携インターフェース作成

### Phase 2: サンプラー機能
1. サンプル音源の読み込みと管理
2. トリガーパッドUIの実装
3. Web Audio APIを通じたAudioAnalyzerへの接続

### Phase 3: エフェクター実装
1. 各種エフェクトノードの実装
2. パラメータコントロールUI
3. エフェクトチェーンの視覚化

### Phase 4: シェーダー統合
1. エフェクトパラメータのuniform変数化
2. リアルタイムデータストリーミング
3. ビジュアルフィードバックの実装

## 技術仕様

### オーディオルーティング
```
[Audio File / Mic Input] 
    ↓
[Sampler Output]
    ↓
[Effect Chain]
    - Filter Node
    - Delay Node
    - Reverb Node
    - Distortion Node
    - Compressor Node
    ↓
[Audio Analyzer]
    ↓
[Shader Uniforms]
```

### 新しいUniform変数
- `effectFilterFreq`: フィルターのカットオフ周波数
- `effectDelayTime`: ディレイタイム
- `effectReverbMix`: リバーブのドライ/ウェット比
- `effectDistortion`: ディストーションの強さ
- `samplerTrigger`: サンプラーのトリガー状態（vec4で各パッドの状態）

### UI設計
- タブ切り替え: Sampler / Effects
- ビジュアルメーター: 各エフェクトの強さを表示
- プリセット保存: エフェクトチェーンの設定を保存

## 期待される効果
1. **インタラクティブ性向上**: 音楽とビジュアルの密接な連携
2. **パフォーマンス向上**: VJプレイ時のリアルタイム操作
3. **創造性の拡張**: エフェクトパラメータによる新しい表現
4. **学習曲線の改善**: 音楽制作の知識がなくても使いやすい